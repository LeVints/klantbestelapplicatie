@page
@model KE03_INTDEV_SE_1_Base.Pages.OverzichtModel
@{
    ViewData["Title"] = "Overzicht";
}

<h1>Overzicht</h1>

<h2>Klanten</h2>
<ul>
    @foreach (var klant in Model.Customers)
    {
        <li>
            <strong>@klant.Name</strong> - @klant.Address
            <ul>
                @foreach (var bestelling in klant.Orders)
                {
                    <li>
                        Bestelling op: @bestelling.OrderDate.ToShortDateString()
                        <ul>
                            @foreach (var groep in bestelling.Products.GroupBy(p => p.Id))
                            {
                                var aantal = groep.Count();
                                var productNaam = groep.First().Name;
                                <li>@($"{productNaam} x{aantal}")</li>
                            }
                        </ul>
                    </li>
                }
            </ul>
        </li>
    }
</ul>
